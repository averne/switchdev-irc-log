[00:00:18] *** Quits: n87 (~n87@212095005061.public.telering.at) (Read error: Operation timed out)
[00:31:38] *** Quits: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com) (Read error: Operation timed out)
[00:40:05] *** Joins: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com)
[01:01:24] *** Quits: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com) (Read error: Operation timed out)
[01:10:45] *** Joins: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com)
[01:30:04] *** Quits: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com) (Ping timeout: 240 seconds)
[01:51:57] *** Joins: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com)
[03:53:53] *** Quits: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com) (Ping timeout: 260 seconds)
[04:30:34] *** Joins: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com)
[04:38:07] *** Quits: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com) (Remote host closed the connection)
[04:38:35] *** Joins: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com)
[05:11:32] *** Quits: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com) (Read error: Operation timed out)
[06:51:08] *** Joins: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com)
[07:42:45] *** Quits: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com) (Read error: Operation timed out)
[07:56:49] *** Joins: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com)
[09:09:06] *** Quits: plutobot_ (~plutobot@188.166.26.149) (hub.efnet.us irc.choopa.net)
[09:09:06] *** Quits: tertu (~tertu@75-168-222-204.mpls.qwest.net) (hub.efnet.us irc.choopa.net)
[09:09:06] *** Quits: hexkyz (~hexkyz@ec2-18-179-123-169.ap-northeast-1.compute.amazonaws.com) (hub.efnet.us irc.choopa.net)
[09:09:18] *** Joins: plutobot (~plutobot@188.166.26.149)
[09:10:14] *** Joins: tertu (~tertu@75-168-222-204.mpls.qwest.net)
[09:10:24] *** Joins: hexkyz (~hexkyz@ec2-18-179-123-169.ap-northeast-1.compute.amazonaws.com)
[10:01:38] *** Joins: n87 (~n87@2001:4bc9:80b:d1d2:68e0:ab8e:aa3a:e800)
[10:47:42] *** Quits: oreo639 (~oreo639@syn-104-173-203-227.res.spectrum.com) (Ping timeout: 622 seconds)
[12:00:25] *** Quits: n87 (~n87@2001:4bc9:80b:d1d2:68e0:ab8e:aa3a:e800) (Read error: Connection reset by peer)
[12:02:05] *** Joins: n87 (~n87@2001:4bc9:80b:d1d2:f4c9:b0ec:249a:67cc)
[12:13:36] *** Quits: n87 (~n87@2001:4bc9:80b:d1d2:f4c9:b0ec:249a:67cc) (Read error: Connection reset by peer)
[12:18:28] *** Joins: n87 (~n87@2001:4bc9:80b:d1d2:c042:b44d:9e1:e5d0)
[12:22:45] *** Quits: Retr0id (~Retr0id@208.87.102.169) (Read error: Connection reset by peer)
[12:22:48] *** Joins: Retr0id (~Retr0id@208.87.102.169)
[15:47:43] *** Quits: n87 (~n87@2001:4bc9:80b:d1d2:c042:b44d:9e1:e5d0) (Read error: Connection reset by peer)
[15:51:44] *** Joins: n87 (~n87@2001:4bc9:80b:d1d2:58ca:8973:ca5c:97e0)
[16:40:43] *** Quits: Surkow (~Surkow@83-84-37-151.cable.dynamic.v4.ziggo.nl) (Ping timeout: 240 seconds)
[16:44:19] *** Quits: n87 (~n87@2001:4bc9:80b:d1d2:58ca:8973:ca5c:97e0) (Read error: Connection reset by peer)
[16:46:04] *** Joins: n87 (~n87@2001:4bc9:80b:d1d2:30fd:b08a:991e:ebbc)
[16:55:09] *** Joins: Surkow (~Surkow@83-84-37-151.cable.dynamic.v4.ziggo.nl)
[16:58:15] *** Joins: imax (~imax@110.219.243.35.bc.googleusercontent.com)
[17:15:42] *** Quits: n87 (~n87@2001:4bc9:80b:d1d2:30fd:b08a:991e:ebbc) (Read error: Connection reset by peer)
[17:17:09] *** Joins: n87 (~n87@2001:4bc9:80b:d1d2:9da3:c57f:f42d:194f)
[17:44:49] *** Quits: n87 (~n87@2001:4bc9:80b:d1d2:9da3:c57f:f42d:194f) (ny.us.hub ircd.choopa.net)
[17:44:50] *** Quits: hexkyz (~hexkyz@ec2-18-179-123-169.ap-northeast-1.compute.amazonaws.com) (ny.us.hub ircd.choopa.net)
[17:44:50] *** Quits: tertu (~tertu@75-168-222-204.mpls.qwest.net) (ny.us.hub ircd.choopa.net)
[17:44:50] *** Quits: plutobot (~plutobot@188.166.26.149) (ny.us.hub ircd.choopa.net)
[17:44:50] *** Quits: mtheall_ (~mtheall@mtheall.com) (ny.us.hub ircd.choopa.net)
[17:44:50] *** Quits: |Shadow| (~Shadow1@ip24-253-244-123.ok.ok.cox.net) (ny.us.hub ircd.choopa.net)
[17:44:50] *** Quits: lameboy (~lameboy@202.47.121.182) (ny.us.hub ircd.choopa.net)
[17:44:50] *** Quits: GeekShado (~antoine@lbf.turmel.info) (ny.us.hub ircd.choopa.net)
[17:45:36] *** Joins: plutobot (~plutobot@188.166.26.149)
[17:45:36] *** Joins: mtheall_ (~mtheall@mtheall.com)
[17:45:36] *** Joins: |Shadow| (~Shadow1@ip24-253-244-123.ok.ok.cox.net)
[17:45:36] *** Joins: lameboy (~lameboy@202.47.121.182)
[17:45:36] *** Joins: GeekShado (~antoine@lbf.turmel.info)
[17:57:33] <imax> I'm compiling https://github.com/rclone/rclone (with help of https://github.com/hajimehoshi/hitsumabushi). I've got it to the point of successfully linking .nro, but it crashes here https://sourcegraph.com/github.com/switchbrew/libnx/-/blob/nx/source/services/hid.c?L307
[18:00:47] <imax> it is called _before_ "RcloneInitialize", so I suspect some of go's init code messes up something in memory, causing the error return value. Any pointers to what is it that might be borked, so I can narrow down my search?
[18:00:51] *** Joins: tertu (~tertu@75-168-222-204.mpls.qwest.net)
[18:00:51] *** Joins: hexkyz (~hexkyz@ec2-18-179-123-169.ap-northeast-1.compute.amazonaws.com)
[18:00:51] *** Joins: n87 (~n87@2001:4bc9:80b:d1d2:9da3:c57f:f42d:194f)
[18:06:26] <averne> make sure that the hid service is initialized, in normal circumstances this is the relevant code https://sourcegraph.com/github.com/switchbrew/libnx@8cff58d5af8f65a881ea0da59322af57843f7dfe/-/blob/nx/source/runtime/init.c?L129
[18:09:58] <imax> thank you! I'll go figure out if the __libnx_init got patched out
[18:12:44] <averne> you can try checking the .elf in ghidra
[18:14:56] <imax> yeah, good point
[18:18:48] <imax> _sigh_ it's taking its time to chomp on 60MB binary
[19:18:28] <imax> nope, _start still invokes __libnx_init. And it's probably something inside Go runtime, because if I replace rclone with helloworld - it still crashes in the same place
[19:24:27] <imax> hm, I can try figuring out which symbols get replaced by the library that go compiler spits out
[20:14:53] *** Quits: substanc3 (~substanc3@88.212.18.0) (hub.efnet.us irc.colosolutions.net)
[20:18:45] *** Quits: n87 (~n87@2001:4bc9:80b:d1d2:9da3:c57f:f42d:194f) (ircd.choopa.net irc.choopa.net)
[20:18:45] *** Quits: hexkyz (~hexkyz@ec2-18-179-123-169.ap-northeast-1.compute.amazonaws.com) (ircd.choopa.net irc.choopa.net)
[20:18:45] *** Quits: tertu (~tertu@75-168-222-204.mpls.qwest.net) (ircd.choopa.net irc.choopa.net)
[20:21:52] *** Joins: n87_2 (~n87@212095005061.public.telering.at)
[20:45:18] <imax> if anyone wants to poke around, here's a minimal repro case https://github.com/imax9000/golang-libnx-crashing
[21:34:09] <averne> it's crashing because the go runtime is aborting here https://github.com/golang/go/blob/master/src/runtime/cgo/gcc_libinit.c#L116
[21:37:25] <imax> how did you see that? I was never getting that fprintf line
[21:38:02] <averne> i used gdb
[21:40:01] <imax> nice! is there a page describing how to set it up? (I'm outta juice for today, so won't get back to actively debugging this until tomorrow)
[21:40:13] <averne> there's a sort of tutorial here, it's geared towards modding but still applicable to homebrew https://gist.github.com/jam1garner/c9ba6c0cff150f1a2480d0c18ff05e33
[21:40:47] <imax> awesome, thank you!
[21:42:24] <averne> basically start $DEVKITPRO/devkitA64/bin/aarch64-none-elf-gdb in the directory where your .elf lives, you do `target extended-remote Switch:22225` -> `os info processes` -> attach to hbloader -> start your homebrew, it will break on the first instruction -> `share` -> place your breakpoints and debug as you would with gdb
[22:27:29] *** Joins: hexkyz (~hexkyz@ec2-18-179-123-169.ap-northeast-1.compute.amazonaws.com)
[22:47:08] *** Joins: substanc3 (~substanc3@88.212.18.0)
[22:52:05] *** Quits: Maylay (~gren@104-0-22-170.lightspeed.miamfl.sbcglobal.net) (Ping timeout: 260 seconds)
